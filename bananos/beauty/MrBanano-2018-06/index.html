<!DOCTYPE html5>
<html>
<meta charset="utf-8" />
<head>
<title>Mr Banano June 2018 - Community Contest - Sponsored by La Jungla</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body onload="onLoad();">
  <h2>Submission Timeframe - Deadline</h2>
  <p>Contest deadline is Saturday June 2nd 13:00 Caracas time, 5:00 PM UTC</p>
  <p>Submissions will be accepted for six hours after the deadline, but risk being penalized (see rules below)</p>
  <p>Results will be available during the week</p>
  <H2>Flyers</H2>
  <table style="width: 100% height: 300px">
    <tr>
      <th class="solid_border centered_text">English</th>
      <th class="solid_border centered_text">Spanish</th>
      <th class="solid_border centered_text">Portuguese</th>
      <th class="solid_border centered_text">Vietnamese</th>
      <th class="solid_border centered_text">Russian</th>
    </tr>
    <tr>
      <td class="solid_border centered_text"></td>
      <td class="solid_border centered_text"></td>
      <td class="solid_border centered_text"></td>
      <td class="solid_border centered_text"></td>
      <td class="solid_border centered_text"></td>
    </tr>
  </table>
  <p>This is a community contest sponsored by the la jungla discord channel.</p>
  <p>All donations and contestants are from the community and not from the banano core team.</p>
  <p>Banano devs (I.E. Coranos) are providing administrative support and discord id verification.</p>
  <p>
    <b>To register or participate, send links to your images and videos to @Coranos#4281 on discord</b>
  </p>
  <H3></H3>
  <h2>Judges</h2>
  <ul>
    <li>@Coranos#4281</li>
  </ul>
  <H1 class="solid_border centered_text">Rules</H1>
  Images courtesy of our meme and pun channel.
  <table id='rulesTable' style="width: 100%">
    <tr>
      <th class="solid_border centered_text">English</th>
      <th class="solid_border centered_text">Spanish</th>
      <th class="solid_border centered_text">Portuguese</th>
      <th class="solid_border centered_text">Vietnamese</th>
      <th class="solid_border centered_text">Russian</th>
    </tr>
    <tr>
      <td class="rules_column  solid_border">
      <td class="rules_column  solid_border">
      <td class="rules_column  solid_border">
      <td class="rules_column  solid_border">
      <td class="rules_column  solid_border">
    </tr>
  </table>
  <table id='dataTable' class='solid_border' style="width: 100%">
    <thead class='solid_border'>
    </thead>
    <tbody class='solid_border'>
    </tbody>
  </table>
  <script src="../../../js-lib/google-tracking.js"></script>
  <script src='../../../js-lib/jquery-3.2.1.js'></script>
  <script src='../../../js-lib/load-json.js'></script>
  <script src='../../../js-lib/json-table.js'></script>
  <script>
      callGoogleTracker();

      function processVideoArray (videos) {
        let result = ''
        for (let videoIx = 0; videoIx < videos.length; videoIx++) {
          if (videos[videoIx].message !== undefined) {
            result += videos[videoIx].message;
          } else {
            result += '<a target="_blank" href="' + videos[videoIx].video + '"><img class="thumbnail" src="' + videos[videoIx].thumbnail + '" />';
          }
        }
        return result;
      }

      function processImageArray (images) {
        let result = ''
        for (let imageIx = 0; imageIx < images.length; imageIx++) {
          result += '<a target="_blank" href="' + images[imageIx] + '"><img class="thumbnail" src="' + images[imageIx] + '" />';
        }
        return result;
      }

      function onLoad () {
        jsonTable('#dataTable', {
          head : [ 'Contestant Number', 'Discord ID', 'Verification Photo<br> <small>Click For Larger Image</small>',
              'Bananos<br> <small>Click For Larger Image</small>', 'Your Strength<br> <small>Click For Video' ],
          thClass : 'solid_border centered_text',
          trClass : 'solid_border',
          sortTable : false
        });

        let options = {};
        options.json = [ 'contestant', 'discord', 'verification', 'banano', 'video' ];

        $.ajaxSetup({
          beforeSend : function (xhr) {
            if (xhr.overrideMimeType) {
              xhr.overrideMimeType('application/json');
            }
          }
        });

        $.getJSON('rules.json', function (results) {
          let table = $('#rulesTable').find('tbody');
          table.empty();
          
          for (const [section, rules] of Object.entries(results)) {
            var sectionHtml = '';
            sectionHtml += '<h2>' + section + '</h2>' + '\n';
            sectionHtml += '<ol>\n';
            for (let ruleIx = 0; ruleIx < rules.length; ruleIx++) {
              const rule = rules[ruleIx];
              sectionHtml += '<li>\n';
              if(typeof rule === 'string') {
                sectionHtml += rule;
                sectionHtml += '\n';
              } else {
                for (const [subsection, subrules] of Object.entries(rule)) {
                  if(subsection ==='en') {
                    sectionHtml += subrules;
                    sectionHtml += '\n';
                  } else if(subsection ==='img') {
                    sectionHtml += '<a target="_blank" href="' + subrules + '"><img class="thumbnail" src="' + subrules + '" /></a>';
                    sectionHtml += '\n';
                  } else {
                    sectionHtml += '<h3>' + subsection + '</h3>' + '\n';
                    sectionHtml += '<ol>\n';
                    for (let subruleIx = 0; subruleIx < subrules.length;subruleIx++) {
                      sectionHtml += '<li>\n';
                      const subrule = subrules[subruleIx];
                      sectionHtml += subrule;
                      sectionHtml += '\n';
                      sectionHtml += '</li>\n';
                    }
                    sectionHtml += '</ol>\n';
                  }
                }                
              }
              sectionHtml += '</li>\n';
            }
            sectionHtml += '</ol>\n';
            table.append(sectionHtml);
          }
        });
        
        $.getJSON('contestants.json', function (results) {
          let table = $('#dataTable').find('tbody');
          table.empty();
          const response = {};
          response.results = results;

          for (let dataIx = 0; dataIx < results.length; dataIx++) {
            results[dataIx].verification = processImageArray(results[dataIx].verification);
            results[dataIx].banano = processImageArray(results[dataIx].banano);
            results[dataIx].video = processVideoArray(results[dataIx].video);
          }

          const row = makeRow(response, options, 'solid_border centered_text', 'solid_border centered_text');
          table.append(row);
        });
      }
    </script>
</body>

</html>
